# Canny()
Canny算子是1986年发表的，这个算子的算法包括几个步骤下面几个。

## 高斯滤波

首先是先用一个5x5的**高斯滤波**扫描整张图片，使得图片变得更加光滑。从下面放的几张图片可以看出来，它对于大图片的处理能力十分局限，即**大图片中即使是噪声可能也会表现得像是细节一样，所以不好平滑**。可能对于大图片现需要自己设计实现一个Canny。
（https://zhuanlan.zhihu.com/p/99959996）
![](pics\classic512.png)
![](pics\classic1024.png)
![](pics\classic5120.png)

## Sobel算子

其次是用**Sobel算子**对于图片进行扫描。Sobel算子之前在计算锐度函数的时候用到过，这里Canny算子就是直接拿过来用了。这里注意输出的是梯度矩阵，包括Canny算子的两个参数也是梯度而不是像素值大小

## 非极大值抑制

第三步叫做**非极大值抑制**。具体到某一个像素的话它做如下操作。

首先确定该处像素的梯度以及方向。

而后比较这一点的梯度值和这一点方向上的前后的梯度值，如果最大则将这一点**点亮（标记为边缘）**。当然，对于离散的图像来说，前后的梯度值是该方向（想象一下就是从这一点出发的一条直线，和前面两个像素连线交于一点，后面两个像素连线交于一点）上的两个像素的梯度的加权平均（某种**线性插值**）。该步骤起到对于边缘进行瘦身的作用.
![Cat](pics\Canny.jpg)
https://zhuanlan.zhihu.com/p/99959996

## 阈值滞后处理

第四步，是双阈值判断继续决定边缘像素（或叫做**阈值滞后处理**），这一步中大于threshhold2的直接被判定为边缘，小于threshhold1的直接被判断为非边缘，剩下的继续在第五步中进行判断

## 孤立弱边缘抑制

第五步，继续判断，进行**孤立弱边缘抑制**，标准是是否和边缘像素邻接，如果邻接（在某个判断标准之下）则是边缘像素，不邻接则不是边缘像素

最后，下图是流程图
![Cat](pics\Canny1.jpg)

另外还有一点，再实际使用的时候，使用Canny算子进行边缘检测后再进行轮廓寻找，而后绘制圆的话，如果图像模糊（这里特指没有对准焦）的话效果就会比较差，可能跟Canny需要根据梯度进行筛选的原因有关，因为模糊图像的梯度肯定是比较小的（也可理解为锐度）